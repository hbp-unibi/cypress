<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Cypress: Cypress</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">C++ Spiking Neural Network Simulation Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Cypress </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Please refer to the <a href="https://github.com/hbp-unibi/cypress/blob/master/README.md">README </a> before getting started. Please also consider the examples at <a href="https://github.com/hbp-unibi/cypress/tree/master/examples">Github </a>. When starting your own project, please begin with the <a href="https://github.com/hbp-unibi/cypress_example">example project </a> which demonstrates how to include cypress as an external project.</p>
<p>This page (at the moment) can be used to search for extended functionality of cypress that is not covered in the Readme or in the examples. This mainpage contains some more details about how to setup the hardware locally.</p>
<p>Note: all config parameters that are introduced in the following are provided via 'simulator={"option" : value, "option2" : value2}' (in all examples via the cli) at runtime.</p>
<p>There are two possible scenarios for random number generation: random input/source spikes and probability-based connectors.</p><ul>
<li>Connectors provide a seed option, as well as choosing the RNG algorithm and have to be fixed connector wise</li>
<li>Spikes can be seeded connector wise (it a parameter of the neuron model), or globally using <code><a class="el" href="da/dbf/classcypress_1_1RNG.html#aee1c477bf40da1ea2bccdb8fd98c8d57" title="Creates a Singleton instance. Only at first time calling this method the TODO. ">cypress::RNG::instance()</a>.seed(1234)</code>, where <code>1234</code> has to be replaced with your seed.</li>
</ul>
<h1><a class="anchor" id="sec1_1"></a>
Backend specific details</h1>
<h2><a class="anchor" id="sec1_2"></a>
GeNN</h2>
<p>When building cypress, GeNN is automatically download and installed. Currently, the backend implemntation does not allow to set individual neuron parameters. Only population wise varying parameters are allowed. GeNN is only build once. Make sure to have the correct CUDA_PATH defined at built time, otherwise GeNN is built without GPU support. See also <a href="http://genn-team.github.io/genn/">GeNN documentation</a> for more detailed information. The cypress backend is loaded at runtime, so building new applications it is irrelevant whether CUDA_PATH is defined or not.</p>
<p>At runtime, you have the following options:</p><ul>
<li><code>timestep</code> time accuracy/resolution of the internally used Euler integration. values between 0.01 ms and 1 ms should be working. The smaller the value, the slower the simulation and the more accurate. Default: 0.1ms</li>
<li><code>gpu</code>: True to actually use an nvidia gpu, false for CPU simulation. Failure on missing Cuda, missing Cuda at first built of cypress or no supported card available. Default: false</li>
<li><code>double</code>: False for using floats internally, True for double. Default: false</li>
</ul>
<h2><a class="anchor" id="sec2_2"></a>
NEST</h2>
<p>Install using the <a href="https://github.com/hbp-unibi/cypress_example/blob/master/virtualenvs.sh">Setup script</a>. It will install everything to <code>~/venvs/nest</code>. Activate the environment via <code>source ~/venvs/nest/bin/activate</code>.</p>
<p>Runtime configuration options are e.g.</p><ul>
<li><code>threads</code> : int, where int has to be replaced by the number of threads you want to use</li>
<li><code>spike_precision</code>: "off_grid", allow more precise spike times</li>
<li><code>timestep</code> : float, value for the accuracy of the simulation, defaults to 0.1ms</li>
<li><code>timing</code> : Does extensive timing measurements, might slow-down simulation</li>
<li><code>keep_compile</code>: If the backend instance is kept, and only weights of list connectors and input spikes are changed, we can reuse the genn compiled code, will speed-up execution</li>
</ul>
<p>NEST actually comes with two backends, one via Python (using pyNN &ndash;&gt; <code>pynn.nest</code>) and one using the SLI interpreter (<code>nest</code>). Both backends should provide similar results, depending on your network the Python or the SLI backend will be faster.</p>
<p>NOTE: Spike values that are smaller than your timestep will be ignored! To be safe, use the simulators only after a few ms!</p>
<h2><a class="anchor" id="sec2_3"></a>
Spikey</h2>
<p>For software installation to standard directory <code>~/venvs/spikey/</code> refer to <a href="https://github.com/hbp-unibi/cypress_example/blob/master/virtualenvs.sh">Setup script</a>. Uncomment the last code part by removing the : " and ". If you do not want to install nest, do not forget to comment out the middle part of the script. Afterwards, execute the script to install the Spikey software. If you stumble upon some errors about missing packages, please refer to the <a href="https://electronicvisions.github.io/hbp-sp9-guidebook/pm/spikey/appendix.html#setup-software">guidebook</a>. After installation, activate the virtual environment via <code>source ~/venvs/spikey/bin/activate</code> before working with Spikey.</p>
<p>The hardware system is connected via usb cable. Please use an active USB hub or and y-cable to connect Spikey to two USB connectors. Spikey uses a bit more current then it is specified in the USB specification. On linux you will need to add the following UDEV rule to your system (google UDEV and your distro to learn how to do that) : <code>SUBSYSTEMS=="usb", ATTRS{idVendor}=="04b4", ATTRS{idProduct}=="1003", MODE:="0666"</code></p>
<p>When running simulations, there are some hardware limitations that have to be kept in mind.</p><ul>
<li>A population can only have either excitatory or inhibitory outgoing connections</li>
<li>Positive weights are in between 0.001 and 0.015 in 0.001 steps (4 bit)</li>
<li>Negative weights are in between -0.004 and -0.06 in 0.004 steps (4 bit)</li>
<li>E_rev_E is set to 0mV, E_rev_I can be chosen between -80 and -55 mV. The same goes for reversal, reset and threshold potential.</li>
<li>Spikey consists of two chips. Neurons on on chip can not communicate inside and outside of the same chip</li>
<li>The hardware is analogue. Therefore you should expect deviations from the simulation.</li>
</ul>
<p>To counter some of the mapping issues, there are two options you can use:</p><ul>
<li><code>mappingOffset</code> : int neurons are mapped to the hardware in the order of their creation, with mappingOffset default = 0</li>
<li><code>neuronPermution</code> : [...] providing a list for the order of the mapping</li>
</ul>
<p>Furthermore:</p><ul>
<li><code>calibIcb</code> : true activates experimental calibration for tau_refrac, otherwise it will always be around 1ms</li>
</ul>
<p>Keep an eye at the logs, if the system reports that spike buffers are almost full, you might have lost some of the spikes. Either, spike rate is too high, or simulation time to long!</p>
<h2><a class="anchor" id="sec2_4"></a>
SpiNNaker</h2>
<p>SpiNNaker is connected via LAN. I recommend to use a usb-lan dongle if no lan port is free on your system. Please set a manual IP address like 192.168.240.99 and a sub-mask 255.255.255.0. The small SpiNN3/large SpiNN5 boards will have the IP 192.168.240.253/192.168.240.1. This IP must be set in <code>~/.spynnaker.cfg</code> (created after first try to simulate something on SpiNNaker) as <code>machineName</code>, as well as the <code>version</code> (3 or 5).</p>
<p>For installation, please use the same procedure as for the Spikey system, except you uncomment the first part of the script. See also <a href="https://spinnakermanchester.github.io/">SpiNNaker docu</a></p>
<p>Issues might relate to overloaded cores, not finished cores, or dropped packages. There are two options to work around these issues:</p><ul>
<li>Reducing the <code>timestep</code> to 0.1ms or even 0.01ms</li>
<li>Reducing the <code>source_neurons_per_core</code> or <code>neurons_per_core</code> to values below 255</li>
</ul>
<p>Another issue is related to a fixed overhead of projections/connections. If you encounter a situation where the system is running out of memory before actually running the simulation, although the network should map to the hardware (less neurons than number of cores times 255, where SpiNN3 has 16*4 and SpiNN5 16*49 cores for simulation of neurons), you can try to merge your connections in a single FromListConnector. Note also, that every high-level population is mapped to at least on core, and there is at most one population per core, such that you cannot have more populations than cores.</p>
<h2><a class="anchor" id="sec2_5"></a>
BrainScaleS</h2>
<p>The BrainScaleS interface library <a href="https://github.com/hbp-unibi/BS2Cypress">BS2Cypress</a> is loaded dynamically at runtime. For more details on the hardware system, you should consider <a href="https://arxiv.org/abs/1703.01909">the paper</a> or take a look at the <a href="https://electronicvisions.github.io/hbp-sp9-guidebook/pm/pm.html">guidebook</a>. The backend supports the following runtime configurations:</p>
<ul>
<li><code>neuron_size</code> Number of neuron circuits combined to one neuron. Possible values: 2,4,6,...; Default: 4</li>
<li><code>big_capacitor</code> Using big capacitors on HICANNs. Possible values: true, false; Default: true</li>
<li><code>bandwidth</code> Consider the firing rate of input neurons and only use the partial maximal bandwidth. The smaller the value, the less neurons are mapped to a single HICANN. Possible values: values between [0,1]; Default: 0.8</li>
<li><code>calib_path</code> Path to calibration files. Possible values: "path/to/calib" ; Default: Current default calib path</li>
<li><code>synapse_loss</code> Allow the loss of synapses while mapping to the hardware system. Possible values are true (allowing loss), false (failure on loss). Default : false</li>
<li><code>ess</code> Use the simulation of the hardware system instead of the hardware. Possible values: true, false. Default: false</li>
<li><code>keep_mapping</code> : True for in the loop simulations, where only low-level weights or input spikes are changed and you want to keep the mapping</li>
<li><code>full_list_connect</code> : True if the list connection should be all to all, inhibitory and excitatory, with only those synpases != 0 defined by the list connector. Required for in the loop simulations and training, where inhibitory connections might become excitatory (or vice versa) and you want to reuse the mapping</li>
</ul>
<p>Only on the hardware:</p><ul>
<li><code>hicann</code> and <code>wafer</code>: Choose the Wafer and the HICANN for your network emulation. Possible values: Available HICANNs and Wafers, also list of HICANNs; Default: 297 and 33. Also possible is a list of lists of HICANNs, e.g. [[296,297],[320,321,340,341],[322,342]], which will map the first population to HICANNs 296,297, the second population to HICANNs [320,321,340,341], ..., in the order of their creation in the high level code.</li>
<li><code>digital_weight</code>: Directly set the digital weight instead of PyNN weights. Currently not supports ListConnectors with varying weights. Possible values: true, false; Default: false </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
